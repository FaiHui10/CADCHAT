# CADCHAT 部署方式对比指南

本文档详细比较了CADCHAT项目的两种部署方式，帮助您选择最适合的部署方案。

## 部署方式概览

| 对比项 | 局域网部署 (server/) | 阿里云部署 (aliserver/) |
|--------|---------------------|-------------------------|
| 适用场景 | 内网环境、数据安全要求高 | 云端部署、无高性能硬件 |
| 数据安全 | 数据完全本地化 | 数据传输至云端API |
| 硬件要求 | 高（需GPU、大内存） | 低（仅需基础服务器） |
| 网络要求 | 局域网内访问 | 需要互联网连接 |
| 维护成本 | 较高（需维护本地模型） | 较低（云端服务） |
| 成本模型 | 一次性硬件投入 | API调用按量付费 |
| 性能 | 本地计算，延迟较低 | 云端计算，受网络影响 |
| Docker支持 | 不支持 | 支持 |
| 部署方式 | 直接运行Python脚本 | 直接运行或Docker部署 |

## 详细对比

### 1. 技术架构

**局域网部署 (server/)**
- 使用本地Ollama + bge-m3模型
- 所有计算在本地完成
- 依赖GPU加速
- 向量索引本地存储

**阿里云部署 (aliserver/)**
- 使用阿里云百炼平台API
- 计算任务在云端完成
- 依赖网络连接质量
- 向量索引在云端管理

### 2. 硬件要求

**局域网部署**
```
- CPU: Intel Core i5 或同等性能
- 内存: 8GB+ RAM (推荐16GB+)
- GPU: NVIDIA GPU (RTX 3060+, 8GB显存)
- 存储: 5GB+ 可用空间
- 网络: 局域网连接
```

**阿里云部署**
```
- CPU: 任意现代处理器
- 内存: 2GB+ RAM (推荐4GB+)
- GPU: 无特殊要求
- 存储: 1GB+ 可用空间
- 网络: 稳定的互联网连接
```

### 3. 成本分析

**局域网部署**
- 一次性硬件投资较高
- 无需持续API费用
- 维护成本由企业承担
- 适合长期大规模使用

**阿里云部署**
- 无硬件投资
- API调用按量付费
- 云端维护无需管理
- 适合中小规模使用

### 4. 安全性考虑

**局域网部署**
- ✅ 数据完全本地化
- ✅ 无数据泄露风险
- ✅ 符合严格安全政策
- ❌ 需要本地安全防护

**阿里云部署**
- ❌ 数据传输至云端
- ❌ 依赖第三方服务
- ✅ 专业的云安全防护
- ❌ 需要合规审批

### 5. 性能表现

**局域网部署**
- ⚡ 本地计算，延迟极低
- 🔄 稳定的响应时间
- 🔋 不受网络波动影响
- ⏱️ 适合高频使用场景

**阿里云部署**
- 🌐 受网络状况影响
- ⏱️ 可能存在网络延迟
- ☁️ 云端计算能力强
- 📊 API限流需考虑

## 选择建议

### 选择局域网部署的情况：

1. **数据安全要求极高**
   - 涉及敏感设计图纸
   - 企业有严格的数据安全政策
   - 不允许数据外传

2. **高性能需求**
   - 高频次查询
   - 对响应时间要求严格
   - 大批量并发处理

3. **长期稳定使用**
   - 预计大量API调用
   - 长期持续使用
   - 需要离线使用能力

### 选择阿里云部署的情况：

1. **硬件资源有限**
   - 无GPU设备
   - 内存不足
   - 预算有限

2. **快速部署需求**
   - 需要快速上线
   - 无运维经验
   - 试用阶段

3. **低频使用场景**
   - 偶尔使用
   - 小规模团队
   - 验证性项目

## 迁移建议

### 从局域网迁移到阿里云：
1. 准备阿里云百炼平台账号
2. 导出用户代码到云端服务器
3. 更新客户端配置
4. 测试功能完整性

### 从阿里云迁移到局域网：
1. 部署本地Ollama环境
2. 导出云端知识库到本地
3. 配置本地模型
4. 更新客户端配置

## 最佳实践

### 混合部署策略：
- 开发测试：使用阿里云部署（快速迭代）
- 生产环境：使用局域网部署（数据安全）

### 渐进式迁移：
- 数据同步：确保两种部署方式的数据一致性
- 平滑切换：逐步迁移用户到新环境
- 回滚计划：保留原部署方式作为备份

选择哪种部署方式主要取决于您的具体需求、预算和技术环境。建议先在测试环境中验证所选方案的可行性。